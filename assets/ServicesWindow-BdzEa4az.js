import{r as p,u as $,C,j as r,T as K,L as Y,d as Z,h as R,n as J,t as Q}from"./index-BLhW-kZ_.js";import{W as U}from"./Window-D_a_ZLap.js";import{g as ee,n as k,a as N,S as se,b as G}from"./swiper-bundle-Db29BkdF.js";import{u as te}from"./index-BIrlpVa3.js";import{e as z,l as ie,A as F}from"./AppearanceAnimation-CqWnQ1JG.js";import{s as d}from"./MainPage.module-B-KBrkSA.js";import{t as ae,c as ne}from"./servicesScripts-ca0JWRVf.js";import{g as re}from"./collections-Idd7ap04.js";function le(E){let{swiper:e,extendParams:P,on:y,emit:T}=E;const A=ee();P({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let h,S=N(),u;const i=[];function W(s){let m=0,c=0,t=0,o=0;return"detail"in s&&(c=s.detail),"wheelDelta"in s&&(c=-s.wheelDelta/120),"wheelDeltaY"in s&&(c=-s.wheelDeltaY/120),"wheelDeltaX"in s&&(m=-s.wheelDeltaX/120),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(m=c,c=0),t=m*10,o=c*10,"deltaY"in s&&(o=s.deltaY),"deltaX"in s&&(t=s.deltaX),s.shiftKey&&!t&&(t=o,o=0),(t||o)&&s.deltaMode&&(s.deltaMode===1?(t*=40,o*=40):(t*=800,o*=800)),t&&!m&&(m=t<1?-1:1),o&&!c&&(c=o<1?-1:1),{spinX:m,spinY:c,pixelX:t,pixelY:o}}function M(){e.enabled&&(e.mouseEntered=!0)}function x(){e.enabled&&(e.mouseEntered=!1)}function b(s){return e.params.mousewheel.thresholdDelta&&s.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&N()-S<e.params.mousewheel.thresholdTime?!1:s.delta>=6&&N()-S<60?!0:(s.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),T("scroll",s.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),T("scroll",s.raw)),S=new A.Date().getTime(),!1)}function l(s){const a=e.params.mousewheel;if(s.direction<0){if(e.isEnd&&!e.params.loop&&a.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&a.releaseOnEdges)return!0;return!1}function L(s){let a=s,X=!0;if(!e.enabled||s.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const w=e.params.mousewheel;e.params.cssMode&&a.preventDefault();let m=e.el;e.params.mousewheel.eventsTarget!=="container"&&(m=document.querySelector(e.params.mousewheel.eventsTarget));const c=m&&m.contains(a.target);if(!e.mouseEntered&&!c&&!w.releaseOnEdges)return!0;a.originalEvent&&(a=a.originalEvent);let t=0;const o=e.rtlTranslate?-1:1,f=W(a);if(w.forceToAxis)if(e.isHorizontal())if(Math.abs(f.pixelX)>Math.abs(f.pixelY))t=-f.pixelX*o;else return!0;else if(Math.abs(f.pixelY)>Math.abs(f.pixelX))t=-f.pixelY;else return!0;else t=Math.abs(f.pixelX)>Math.abs(f.pixelY)?-f.pixelX*o:-f.pixelY;if(t===0)return!0;w.invert&&(t=-t);let I=e.getTranslate()+t*w.sensitivity;if(I>=e.minTranslate()&&(I=e.minTranslate()),I<=e.maxTranslate()&&(I=e.maxTranslate()),X=e.params.loop?!0:!(I===e.minTranslate()||I===e.maxTranslate()),X&&e.params.nested&&a.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const n={time:N(),delta:Math.abs(t),direction:Math.sign(t),raw:s};i.length>=2&&i.shift();const g=i.length?i[i.length-1]:void 0;if(i.push(n),g?(n.direction!==g.direction||n.delta>g.delta||n.time>g.time+150)&&b(n):b(n),l(n))return!0}else{const n={time:N(),delta:Math.abs(t),direction:Math.sign(t)},g=u&&n.time<u.time+500&&n.delta<=u.delta&&n.direction===u.direction;if(!g){u=void 0;let v=e.getTranslate()+t*w.sensitivity;const V=e.isBeginning,q=e.isEnd;if(v>=e.minTranslate()&&(v=e.minTranslate()),v<=e.maxTranslate()&&(v=e.maxTranslate()),e.setTransition(0),e.setTranslate(v),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!V&&e.isBeginning||!q&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:n.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(h),h=void 0,i.length>=15&&i.shift();const _=i.length?i[i.length-1]:void 0,H=i[0];if(i.push(n),_&&(n.delta>_.delta||n.direction!==_.direction))i.splice(0);else if(i.length>=15&&n.time-H.time<500&&H.delta-n.delta>=1&&n.delta<=6){const B=t>0?.8:.2;u=n,i.splice(0),h=k(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,B)},0)}h||(h=k(()=>{if(e.destroyed||!e.params)return;const B=.5;u=n,i.splice(0),e.slideToClosest(e.params.speed,!0,void 0,B)},500))}if(g||T("scroll",a),e.params.autoplay&&e.params.autoplay.disableOnInteraction&&e.autoplay.stop(),w.releaseOnEdges&&(v===e.minTranslate()||v===e.maxTranslate()))return!0}}return a.preventDefault?a.preventDefault():a.returnValue=!1,!1}function O(s){let a=e.el;e.params.mousewheel.eventsTarget!=="container"&&(a=document.querySelector(e.params.mousewheel.eventsTarget)),a[s]("mouseenter",M),a[s]("mouseleave",x),a[s]("wheel",L)}function j(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",L),!0):e.mousewheel.enabled?!1:(O("addEventListener"),e.mousewheel.enabled=!0,!0)}function D(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,L),!0):e.mousewheel.enabled?(O("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}y("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&D(),e.params.mousewheel.enabled&&j()}),y("destroy",()=>{e.params.cssMode&&j(),e.mousewheel.enabled&&D()}),Object.assign(e.mousewheel,{enable:j,disable:D})}const we=()=>{const E=p.useRef(null),e=p.useRef(null),[P,y]=p.useState(!0),[T,A]=p.useState(!1),[h,S]=p.useState(50),[u,i]=p.useState("25dvw"),{ref:W,inView:M}=te({triggerOnce:!1,threshold:.75}),{t:x}=$();p.useEffect(()=>{E.current=document.getElementById(C.ROOT_CONTAINER_ID)},[]),p.useEffect(()=>{window.innerWidth>768&&(P||T)&&z({root:E,swiper:e})},[P,T,M]),p.useEffect(()=>{M&&window.innerWidth>768&&ie({root:E,swiper:e})},[M]),p.useEffect(()=>{const l=()=>{window.innerWidth>900?(S(50),i("25dvw")):(S(100),i("90dvw"))};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const b=l=>{z({root:E,swiper:e}),l?J(l):Q()};return r.jsxs(U,{ref:W,sticky:!0,id:C.SERVICES_WINDOW_MAIN_PAGE_ID,className:d.servicesWindow,children:[r.jsx(F,{initialPosition:C.BASE_APPEARANCE_ANIMATION.clone(),delay:500,style:{width:"100%"},children:r.jsx("h2",{className:d.servicesTitle,children:x("servicesWindowInMainPage.title")})}),r.jsx(F,{initialPosition:new K(5,"rem","X"),delay:750,duration:.35,style:{width:"100%"},children:r.jsxs(se,{ref:e,direction:"horizontal",slidesPerView:"auto",spaceBetween:h,mousewheel:!0,centeredSlides:!0,watchSlidesProgress:!0,initialSlide:window.innerWidth>768?1:0,modules:[le],onSlideChange:l=>{y(l.isBeginning),A(l.isEnd)},className:d.servicesSwiper,children:[re(x).map((l,L)=>r.jsx(G,{style:{width:u},children:r.jsxs(Y,{to:"/services",viewTransition:!0,onClick:()=>b(l.id),className:d.servicesSwiperItem,style:{backgroundImage:`url(${Z(l.imgSrc)})`},children:[r.jsx("p",{className:d.servicesSwiperItemDescription,children:ae(l.description,25)}),r.jsx("h3",{className:d.servicesSwiperItemTitle,children:ne(l.title)}),r.jsx("div",{className:d.serviceSwiperItemButton,children:r.jsx(R,{className:d.serviceSwiperItemButtonArrowSvg})})]})},L)),r.jsx(G,{style:{width:u},children:r.jsxs(Y,{to:"/services",viewTransition:!0,onClick:()=>b(),className:d.servicesSwiperLastItem,children:[r.jsx("p",{className:d.servicesSwiperLastItemDescription,children:x("servicesWindowInMainPage.swiperLastItemDescription")}),r.jsx("h3",{className:d.servicesSwiperLastItemTitle,children:x("servicesWindowInMainPage.swiperLastItemTitle")}),r.jsx("div",{className:d.serviceSwiperLastItemButton,children:r.jsx(R,{className:d.serviceSwiperLastItemButtonArrowSvg})})]})})]})})]})};export{we as default};
